{
  Deflater deflater=new Deflater();
  deflater.setInput(data);
  ByteArrayOutputStream outputStream=new ByteArrayOutputStream(data.length);
  deflater.finish();
  byte[] buffer=new byte[1024];
  while (!deflater.finished()) {
    int count=deflater.deflate(buffer);
    outputStream.write(buffer,0,count);
  }
  outputStream.close();
  byte[] output=outputStream.toByteArray();
  logger.info("Original: " + data.length / 1024 + " Kb");
  logger.info("Compressed: " + output.length / 1024 + " Kb");
  return output;
}
