{
  if (!Thread.currentThread().isInterrupted()) {
    final long freeMem=Runtime.getRuntime().freeMemory();
    if (freeMem <= MEMORY_THRESHOLD) {
      throw new OutOfMemoryError("free memory:" + freeMem + " is lower than "+ MEMORY_THRESHOLD);
    }
  }
 else {
    logger.info("thread interrupted");
    throw new OutOfMemoryError("thread interrupted");
  }
}
