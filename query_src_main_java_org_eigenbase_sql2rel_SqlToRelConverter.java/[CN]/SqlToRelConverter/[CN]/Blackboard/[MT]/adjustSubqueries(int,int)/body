{
  for (  Map.Entry<SqlNode,RexNode> entry : mapSubqueryToExpr.entrySet()) {
    RexNode expr=entry.getValue();
    RexShuttle shuttle=new RexShuttle(){
      public RexNode visitRangeRef(      RexRangeRef rangeRef){
        if (rangeRef.getOffset() >= index) {
          return rexBuilder.makeRangeReference(rangeRef.getType(),rangeRef.getOffset() + count,false);
        }
 else {
          return rangeRef;
        }
      }
      public RexNode visitInputRef(      RexInputRef inputRef){
        if (inputRef.getIndex() >= index) {
          return rexBuilder.makeInputRef(inputRef.getType(),inputRef.getIndex() + count);
        }
 else {
          return inputRef;
        }
      }
    }
;
    RexNode newExpr=expr.accept(shuttle);
    entry.setValue(newExpr);
  }
}
