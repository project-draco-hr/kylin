{
  final List<RawResource> allResources=getAllResources(rangeStart,rangeEnd,timeStartInMillis,timeEndInMillis);
  if (allResources.isEmpty()) {
    return Collections.emptyList();
  }
  List<T> result=Lists.newArrayList();
  try {
    for (    RawResource rawResource : allResources) {
      final T element=serializer.deserialize(new DataInputStream(rawResource.inputStream));
      element.setLastModified(rawResource.timestamp);
      result.add(element);
    }
    return result;
  }
  finally {
    for (    RawResource rawResource : allResources) {
      IOUtils.closeQuietly(rawResource.inputStream);
    }
  }
}
