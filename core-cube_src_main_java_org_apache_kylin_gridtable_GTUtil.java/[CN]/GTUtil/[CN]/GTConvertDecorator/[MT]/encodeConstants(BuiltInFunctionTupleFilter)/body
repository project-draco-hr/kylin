{
  TblColRef externalCol=funcFilter.getColumn();
  if (externalCol == null) {
    return funcFilter;
  }
  Collection constValues=funcFilter.getConstantTupleFilter().getValues();
  if (constValues == null || constValues.isEmpty()) {
    return funcFilter;
  }
  BuiltInFunctionTupleFilter newFuncFilter;
  try {
    newFuncFilter=funcFilter.getClass().getConstructor(String.class).newInstance(funcFilter.getName());
  }
 catch (  InstantiationException|IllegalAccessException|NoSuchMethodException|InvocationTargetException e) {
    throw new RuntimeException(e);
  }
  newFuncFilter.addChild(new ColumnTupleFilter(externalCol));
  int col=colMapping == null ? externalCol.getColumnDesc().getZeroBasedIndex() : colMapping.indexOf(externalCol);
  ByteArray code;
  Set newValues=Sets.newHashSet();
  for (  Object value : constValues) {
    code=translate(col,value,0);
    if (code == null) {
      throw new IllegalStateException("Cannot serialize BuiltInFunctionTupleFilter");
    }
    newValues.add(code);
  }
  newFuncFilter.addChild(new ConstantTupleFilter(newValues));
  return newFuncFilter;
}
