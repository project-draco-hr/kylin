{
  return new Thread("CuboidOutput"){
    public void run(){
      try {
        while (!outputPending.isEmpty()) {
          CuboidResult result=outputPending.firstEntry().getValue();
synchronized (result) {
            while (result.table == null) {
              try {
                result.wait();
              }
 catch (              InterruptedException e) {
                logger.error("interrupted",e);
              }
            }
          }
          outputCuboid(result.cuboidId,result.table);
          outputPending.remove(result.cuboidId);
        }
      }
 catch (      Throwable ex) {
        outputThreadException=ex;
      }
    }
  }
;
}
