{
  byte[] bytes=value.unscaledValue().toByteArray();
  if (bytes.length + 2 > maxLength)   throw new IllegalArgumentException("'" + value + "' exceeds the expected length for type "+ type);
  BytesUtil.writeVInt(value.scale(),out);
  BytesUtil.writeVInt(bytes.length,out);
  out.put(bytes);
}
