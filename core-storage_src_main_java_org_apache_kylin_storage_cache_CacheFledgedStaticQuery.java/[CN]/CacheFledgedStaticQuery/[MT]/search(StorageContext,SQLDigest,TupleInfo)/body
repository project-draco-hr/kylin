{
  StreamSQLResult cachedResult=getStreamSQLResult(new StreamSQLDigest(sqlDigest,null));
  ITupleIterator ret=null;
  if (cachedResult != null) {
    logger.info("using existing cache");
    return new SimpleTupleIterator(cachedResult.reuse(Ranges.<Long>all()));
  }
 else {
    logger.info("no existing cache to use");
    ret=underlyingStorage.search(context,sqlDigest,returnTupleInfo);
    final TeeTupleIterator tee=new TeeTupleIterator(ret);
    tee.addCloseListener(this);
    return tee;
  }
}
