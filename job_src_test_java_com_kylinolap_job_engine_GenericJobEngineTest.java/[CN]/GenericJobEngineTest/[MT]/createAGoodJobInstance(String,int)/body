{
  CubeInstance cube=CubeManager.getInstance(KylinConfig.getInstanceFromEnv()).getCube(cubeName);
  cube.getSegments().clear();
  CubeManager.getInstance(KylinConfig.getInstanceFromEnv()).updateCube(cube);
  CubeSegment seg=CubeManager.getInstance(KylinConfig.getInstanceFromEnv()).allocateSegments(cube,CubeBuildTypeEnum.BUILD,0,12345L).get(0);
  JobInstance jobInstance=new JobInstance();
  jobInstance.setUuid(uuid);
  jobInstance.setRelatedCube(cubeName);
  jobInstance.setRelatedSegment(seg.getName());
  jobInstance.setName("A_Good_Job");
  jobInstance.setType(CubeBuildTypeEnum.BUILD);
  JobStep step1=new JobStep();
  step1.setName("step1");
  step1.setExecCmd("java -jar /tmp/SampleJavaProgram.jarfile " + syncCmdSleepSeconds);
  step1.setStatus(JobStepStatusEnum.PENDING);
  step1.setSequenceID(0);
  step1.setCmdType(JobStepCmdTypeEnum.SHELL_CMD);
  step1.setRunAsync(false);
  JobStep step2=new JobStep();
  step2.setName(JobConstants.STEP_NAME_CONVERT_CUBOID_TO_HFILE);
  step2.setExecCmd(mrCmd + mrOutputDir1);
  step2.setStatus(JobStepStatusEnum.PENDING);
  step2.setSequenceID(1);
  step2.setCmdType(JobStepCmdTypeEnum.SHELL_CMD_HADOOP);
  step2.setRunAsync(true);
  JobStep step3=new JobStep();
  step3.setName("synced mr step");
  step3.setExecCmd(mrCmd + mrOutputDir2);
  step3.setStatus(JobStepStatusEnum.PENDING);
  step3.setSequenceID(2);
  step3.setCmdType(JobStepCmdTypeEnum.SHELL_CMD_HADOOP);
  step3.setRunAsync(false);
  jobInstance.addStep(0,step1);
  jobInstance.addStep(1,step2);
  jobInstance.addStep(2,step3);
  return jobInstance;
}
