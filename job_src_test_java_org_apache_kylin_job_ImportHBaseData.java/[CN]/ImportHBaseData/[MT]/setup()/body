{
  KylinConfig.destoryInstance();
  System.setProperty(KylinConfig.KYLIN_CONF,AbstractKylinTestCase.SANDBOX_TEST_DATA);
  kylinConfig=KylinConfig.getInstanceFromEnv();
  cli=kylinConfig.getCliCommandExecutor();
  String metadataUrl=kylinConfig.getMetadataUrl();
  int cut=metadataUrl.indexOf('@');
  tableNameBase=metadataUrl.substring(0,cut);
  String hbaseUrl=cut < 0 ? metadataUrl : metadataUrl.substring(cut + 1);
  HConnection conn=HBaseConnection.get(hbaseUrl);
  try {
    hbase=new HBaseAdmin(conn);
    config=hbase.getConfiguration();
  }
 catch (  IOException e) {
    e.printStackTrace();
    throw e;
  }
  uploadTarballToRemote();
}
