{
  CubeDesc cubeDesc=cubeDescManager.getCubeDesc("test_kylin_cube_with_slr_left_join_desc");
  CubeInstance cube=cubeManager.createCube(CUBE_NAME,"DEFAULT",cubeDesc,"test");
  assertNotNull(cube);
  JobListRequest jobRequest=new JobListRequest();
  Assert.assertNotNull(jobSchedulerController.list(jobRequest));
  JobBuildRequest jobBuildRequest=new JobBuildRequest();
  jobBuildRequest.setBuildType("BUILD");
  jobBuildRequest.setStartTime(0L);
  jobBuildRequest.setEndTime(new Date().getTime());
  JobInstance job=cubeController.rebuild(CUBE_NAME,jobBuildRequest);
  Assert.assertNotNull(jobSchedulerController.get(job.getId()));
  Map<String,String> output=jobSchedulerController.getStepOutput(job.getId(),0);
  Assert.assertNotNull(output);
  jobDAO.deleteJob(job);
  if (cubeManager.getCube(CUBE_NAME) != null) {
    cubeManager.dropCube(CUBE_NAME,false);
  }
}
