{
  log.error(t.getLocalizedMessage(),t);
  String exceptionMsg="Failed with Exception:" + ExceptionUtils.getFullStackTrace(t);
  try {
    JobInstance jobInstance=JobDAO.getInstance(config).getJob(jobInstanceUuid);
    jobInstance.getSteps().get(jobInstanceStepSeqId).setStatus(JobStepStatusEnum.ERROR);
    jobInstance.getSteps().get(jobInstanceStepSeqId).setExecEndTime(System.currentTimeMillis());
    JobDAO.getInstance(config).updateJobInstance(jobInstance);
    String output=JobDAO.getInstance(config).getJobOutput(jobInstanceUuid,jobInstanceStepSeqId).getOutput();
    output=output + "\n" + exceptionMsg;
    JobDAO.getInstance(config).saveJobOutput(jobInstanceUuid,jobInstanceStepSeqId,output);
  }
 catch (  IOException e1) {
    log.error(e1.getLocalizedMessage(),e1);
  }
}
