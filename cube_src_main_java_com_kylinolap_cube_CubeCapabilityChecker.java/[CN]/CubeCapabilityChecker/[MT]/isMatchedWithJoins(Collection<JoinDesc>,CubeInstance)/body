{
  CubeDesc cubeDesc=cube.getDescriptor();
  List<JoinDesc> cubeJoins=new ArrayList<JoinDesc>(cubeDesc.getDimensions().size());
  for (  DimensionDesc d : cubeDesc.getDimensions()) {
    if (d.getJoin() != null) {
      cubeJoins.add(d.getJoin());
    }
  }
  for (  JoinDesc j : joins) {
    String pTable=j.getPrimaryKeyColumns()[0].getTable();
    String factTable=cubeDesc.getFactTable();
    if (factTable.equals(pTable)) {
      j.swapPKFK();
    }
    String fTable=j.getForeignKeyColumns()[0].getTable();
    if (!factTable.equals(fTable)) {
      logger.info("Fact Table" + factTable + " not matched in join: "+ j+ " on cube "+ cube.getName());
      return false;
    }
    if (!cubeJoins.contains(j)) {
      logger.info("Query joins don't macth on cube " + cube.getName());
      return false;
    }
  }
  return true;
}
