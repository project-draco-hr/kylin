{
  ProjectManager prjMgr=ProjectManager.getInstance(olapContext.olapSchema.getConfig());
  logger.info("The project manager's reference is " + prjMgr);
  String factTableName=olapContext.firstTableScan.getTableName();
  String projectName=olapContext.olapSchema.getProjectName();
  Set<IRealization> realizations=prjMgr.getRealizationsByTable(projectName,factTableName);
  SQLDigest sqlDigest=olapContext.getSQLDigest();
  List<Candidate> candidates=Lists.newArrayListWithCapacity(realizations.size());
  for (  IRealization real : realizations) {
    if (real.isReady())     candidates.add(new Candidate(real,sqlDigest));
  }
  logger.info("Find candidates by table " + factTableName + " and project="+ projectName+ " : "+ StringUtils.join(candidates,","));
  RoutingRule.applyRules(candidates);
  if (candidates.size() == 0) {
    throw new NoRealizationFoundException("Can't find any realization. Please confirm with providers. SQL digest: " + sqlDigest.toString());
  }
  Candidate chosen=candidates.get(0);
  adjustForDimensionAsMeasure(chosen,olapContext);
  logger.info("The realizations remaining: ");
  logger.info(RoutingRule.getPrintableText(candidates));
  logger.info("The realization being chosen: " + chosen.realization.getName());
  return chosen.realization;
}
