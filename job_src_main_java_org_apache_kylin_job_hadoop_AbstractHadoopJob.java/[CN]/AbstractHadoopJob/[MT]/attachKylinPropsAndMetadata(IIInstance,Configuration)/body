{
  File tmp=File.createTempFile("kylin_job_meta","");
  FileUtils.forceDelete(tmp);
  File metaDir=new File(tmp,"meta");
  metaDir.mkdirs();
  KylinConfig kylinConfig=KylinConfig.getInstanceFromEnv();
  File kylinPropsFile=new File(metaDir,"kylin.properties");
  kylinConfig.writeProperties(kylinPropsFile);
  ArrayList<String> dumpList=new ArrayList<String>();
  dumpList.add(ii.getResourcePath());
  dumpList.add(ii.getDescriptor().getModel().getResourcePath());
  dumpList.add(ii.getDescriptor().getResourcePath());
  for (  String tableName : ii.getDescriptor().getModel().getAllTables()) {
    TableDesc table=MetadataManager.getInstance(kylinConfig).getTableDesc(tableName);
    dumpList.add(table.getResourcePath());
  }
  for (  IISegment segment : ii.getSegments()) {
    dumpList.addAll(segment.getDictionaryPaths());
  }
  dumpResources(kylinConfig,metaDir,dumpList);
  addToHadoopDistCache(conf,metaDir);
}
