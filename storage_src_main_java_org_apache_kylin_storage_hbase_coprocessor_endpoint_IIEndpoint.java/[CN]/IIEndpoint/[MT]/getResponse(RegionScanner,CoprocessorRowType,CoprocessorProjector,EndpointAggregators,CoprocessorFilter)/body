{
  TableRecordInfoDigest tableRecordInfoDigest=aggregators.getTableRecordInfoDigest();
  IIProtos.IIResponse response;
synchronized (innerScanner) {
    IIKeyValueCodec codec=new IIKeyValueCodec(tableRecordInfoDigest);
    Iterable<Slice> slices=codec.decodeKeyValue(new HbaseServerKVIterator(innerScanner));
    if (aggregators.isEmpty()) {
      response=getNonAggregatedResponse(slices,tableRecordInfoDigest,filter,type);
    }
 else {
      response=getAggregatedResponse(slices,tableRecordInfoDigest,filter,type,projector,aggregators);
    }
  }
  return response;
}
