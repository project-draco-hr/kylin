{
  if (filter instanceof CompareTupleFilter) {
    CompareTupleFilter cfilter=(CompareTupleFilter)filter;
    List<? extends TupleFilter> children=cfilter.getChildren();
    if (children == null || children.size() < 1) {
      throw new IllegalArgumentException("Illegal compare filter: " + cfilter);
    }
    TblColRef col=cfilter.getColumn();
    if (col == null || (!"date".equals(col.getDatatype()))) {
      return cfilter;
    }
    for (    TupleFilter child : filter.getChildren()) {
      dateCompareTupleChildren.put(child,true);
    }
  }
  if (filter instanceof ConstantTupleFilter && dateCompareTupleChildren.containsKey(filter)) {
    ConstantTupleFilter constantTupleFilter=(ConstantTupleFilter)filter;
    Set<String> newValues=Sets.newHashSet();
    for (    String value : (Collection<String>)constantTupleFilter.getValues()) {
      newValues.add(DateFormat.formatToDateStr(Long.valueOf(value)));
    }
    return new ConstantTupleFilter(newValues);
  }
  return filter;
}
