{
  if (args.length >= 1) {
    System.setProperty("kylin.metadata.url",args[0]);
  }
  int port=7070;
  if (args.length >= 2) {
    port=Integer.parseInt(args[1]);
  }
  ClasspathUtil.addClasspath(new File("../examples/test_case_data/sandbox").getAbsolutePath());
  String webBase=new File("../webapp/app").getAbsolutePath();
  if (new File(webBase,"WEB-INF").exists() == false) {
    throw new RuntimeException("In order to launch Kylin web app from IDE, please make a symblink from webapp/app/WEB-INF to server/src/main/webapp/WEB-INF");
  }
  Tomcat tomcat=new Tomcat();
  tomcat.setPort(port);
  tomcat.setBaseDir(".");
  StandardServer server=(StandardServer)tomcat.getServer();
  AprLifecycleListener listener=new AprLifecycleListener();
  server.addLifecycleListener(listener);
  Context webContext=tomcat.addWebapp("/kylin",webBase);
  ErrorPage notFound=new ErrorPage();
  notFound.setErrorCode(404);
  notFound.setLocation("/index.html");
  webContext.addErrorPage(notFound);
  webContext.addWelcomeFile("index.html");
  tomcat.start();
  tomcat.getServer().await();
}
