{
  if (conf != null) {
    return conf;
  }
  conf=new JobConf();
  String path="/apache/hadoop/conf/";
  File file=new File(path);
  if (file.isDirectory()) {
    File[] files=file.listFiles();
    for (int i=0; i < files.length; i++) {
      File tmp=files[i];
      if (tmp.getName().endsWith(".xml")) {
        try {
          conf.addResource(new FileInputStream(tmp));
        }
 catch (        FileNotFoundException e) {
          e.printStackTrace();
        }
      }
    }
  }
  if (tokenPath != null) {
    conf.set(MRJobConfig.MAPREDUCE_JOB_CREDENTIALS_BINARY,tokenPath);
    conf.set("hadoop.security.authentication","kerberos");
    UserGroupInformation.setConfiguration(conf);
    try {
      UserGroupInformation.loginUserFromKeytab("b_kylin@CORP.EBAY.COM","~/.keytabs/b_kylin.keytab");
      System.out.println("###" + UserGroupInformation.getLoginUser());
    }
 catch (    IOException e) {
      e.printStackTrace();
    }
  }
  return conf;
}
