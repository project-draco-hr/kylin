{
  cubeController=new CubeController();
  cubeController.setCubeService(cubeService);
  cubeController.setJobService(jobService);
  cubeDescController=new CubeDescController();
  cubeDescController.setCubeService(cubeService);
  CubeDesc[] cubes=(CubeDesc[])cubeDescController.getCube("test_kylin_cube_with_slr_ready");
  Assert.assertNotNull(cubes);
  Assert.assertNotNull(cubeController.getSql("test_kylin_cube_with_slr_ready","20130331080000_20131212080000"));
  Assert.assertNotNull(cubeController.getCubes(null,null,0,5));
  CubeDesc cube=cubes[0];
  CubeDesc newCube=new CubeDesc();
  String newCubeName=cube.getName() + "_test_save";
  newCube.setName(newCubeName);
  newCube.setModelName(cube.getModelName());
  newCube.setModel(cube.getModel());
  newCube.setDimensions(cube.getDimensions());
  newCube.setHBaseMapping(cube.getHBaseMapping());
  newCube.setMeasures(cube.getMeasures());
  newCube.setConfig(cube.getConfig());
  newCube.setRowkey(cube.getRowkey());
  ObjectMapper mapper=new ObjectMapper();
  StringWriter stringWriter=new StringWriter();
  mapper.writeValue(stringWriter,newCube);
  CubeRequest cubeRequest=new CubeRequest();
  cubeRequest.setCubeDescData(stringWriter.toString());
  cubeRequest=cubeController.saveCubeDesc(cubeRequest);
  cubeController.deleteCube(newCubeName);
}
