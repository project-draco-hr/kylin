{
  Digester digester=new Digester();
  digester.setNamespaceAware(xmlNamespaceAware);
  digester.setValidating(xmlValidation);
  digester.setUseContextClassLoader(true);
  SchemaResolver schemaResolver=new SchemaResolver(digester);
  registerLocalSchema(schemaResolver);
  digester.setEntityResolver(schemaResolver);
  if (rule != null) {
    digester.addRuleSet(rule);
  }
  return (digester);
}
