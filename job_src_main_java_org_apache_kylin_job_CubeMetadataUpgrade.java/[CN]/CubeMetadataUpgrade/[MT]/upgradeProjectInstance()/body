{
  List<String> paths=listResourceStore(ResourceStore.PROJECT_RESOURCE_ROOT);
  for (  String path : paths) {
    try {
      org.apache.kylin.cube.model.v1.ProjectInstance oldPrj=store.getResource(path,org.apache.kylin.cube.model.v1.ProjectInstance.class,new JsonSerializer<org.apache.kylin.cube.model.v1.ProjectInstance>(org.apache.kylin.cube.model.v1.ProjectInstance.class));
      ProjectInstance newPrj=new ProjectInstance();
      newPrj.setUuid(oldPrj.getUuid());
      newPrj.setName(oldPrj.getName());
      newPrj.setOwner(oldPrj.getOwner());
      newPrj.setDescription(oldPrj.getDescription());
      newPrj.setLastModified(oldPrj.getLastModified());
      newPrj.setCreateTimeUTC(RootPersistentEntity.parseTime(oldPrj.getCreateTime()));
      newPrj.setStatus(oldPrj.getStatus());
      List<RealizationEntry> realizationEntries=Lists.newArrayList();
      for (      String cube : oldPrj.getCubes()) {
        RealizationEntry entry=new RealizationEntry();
        entry.setType(RealizationType.CUBE);
        entry.setRealization(cube);
        realizationEntries.add(entry);
      }
      newPrj.setRealizationEntries(realizationEntries);
      Set<String> tables=Sets.newHashSet();
      for (      String table : oldPrj.getTables()) {
        String tb=this.appendDBName(table);
        if (tb != null)         tables.add(this.appendDBName(tb));
      }
      newPrj.setTables(tables);
      store.putResource(newPrj.getResourcePath(),newPrj,ProjectManager.PROJECT_SERIALIZER);
      updatedResources.add(path);
    }
 catch (    IOException e) {
      e.printStackTrace();
      errorMsgs.add("Upgrade Project at '" + path + "' failed: "+ e.getLocalizedMessage());
    }
  }
}
