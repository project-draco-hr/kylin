{
  ThreadLocal<SimpleDateFormat> formatThreadLocal=threadLocalMap.get(datePattern);
  if (formatThreadLocal == null) {
    threadLocalMap.put(datePattern,formatThreadLocal=new ThreadLocal<SimpleDateFormat>());
  }
  SimpleDateFormat format=formatThreadLocal.get();
  if (format == null) {
    format=new SimpleDateFormat(datePattern);
    format.setTimeZone(TimeZone.getTimeZone("GMT"));
    formatThreadLocal.set(format);
  }
  return format;
}
