{
  File logPath=new File(LOG_DIR);
  if (!logPath.exists()) {
    logPath.mkdirs();
  }
  System.setProperty("hadoop.log.dir",LOG_DIR);
  System.setProperty("javax.xml.parsers.SAXParserFactory","com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl");
  System.setProperty("javax.xml.parsers.DocumentBuilderFactory","com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl");
  Properties props=new Properties();
  props.setProperty("dfs.datanode.data.dir.perm","775");
  conf=new JobConf();
  File miniclusterFolder=new File(AbstractKylinTestCase.MINICLUSTER_TEST_DATA);
  System.out.println("----" + miniclusterFolder.getAbsolutePath());
  String coreSitePath=miniclusterFolder + File.separator + "core-site.xml";
  conf.addResource(new Path(coreSitePath));
  String hdfsSitePath=miniclusterFolder + File.separator + "hdfs-site.xml";
  conf.addResource(new Path(hdfsSitePath));
  String mrSitePath=miniclusterFolder + File.separator + "mapred-site.xml";
  conf.addResource(new Path(mrSitePath));
  String hbSitePath=miniclusterFolder + File.separator + "hbase-site.xml";
  conf.addResource(new Path(hbSitePath));
  Configuration c=new Configuration();
  c.addResource(new Path(coreSitePath));
  c.addResource(new Path(hdfsSitePath));
  c.addResource(new Path(mrSitePath));
  c.addResource(new Path(hbSitePath));
  System.setProperty("test.build.data",miniclusterFolder.getAbsolutePath());
  System.setProperty("test.build.data.basedirectory",miniclusterFolder.getAbsolutePath());
  startCluster(true,c,conf,props);
}
