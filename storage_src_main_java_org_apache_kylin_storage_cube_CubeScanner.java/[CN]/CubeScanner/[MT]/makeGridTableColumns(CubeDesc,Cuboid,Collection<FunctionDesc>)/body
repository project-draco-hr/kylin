{
  BitSet result=new BitSet();
  int metricsIndexStart=cuboid.getColumns().size();
  for (  FunctionDesc metric : metrics) {
    int index=0;
    for (    MeasureDesc measure : cubeDesc.getMeasures()) {
      if (metric.equals(measure.getFunction())) {
        break;
      }
      index++;
    }
    if (index == cubeDesc.getMeasures().size())     throw new IllegalStateException(metric + " not found in " + cubeDesc);
    result.set(metricsIndexStart + index);
  }
  return result;
}
