{
  String title="checkCountAll job(host:" + host + " tableName:"+ tableName+ ") ";
  StringBuilder stringBuilder=new StringBuilder();
  String url=host + "/kylin/api/query";
  PostMethod request=new PostMethod(url);
  try {
    request.addRequestHeader("Authorization","Basic " + authorization);
    request.addRequestHeader("Content-Type","application/json");
    String query=String.format("{\"sql\":\"select count(*) from %s\",\"offset\":0,\"limit\":50000,\"acceptPartial\":true,\"project\":\"default\"}",tableName);
    request.setRequestEntity(new ByteArrayRequestEntity(query.getBytes()));
    int statusCode=new HttpClient().executeMethod(request);
    String msg=Bytes.toString(request.getResponseBody());
    stringBuilder.append("host:").append(host).append("\n");
    stringBuilder.append("query:").append(query).append("\n");
    stringBuilder.append("statusCode:").append(statusCode).append("\n");
    if (statusCode == 200) {
      title+="succeed";
      final HashMap hashMap=JsonUtil.readValue(msg,HashMap.class);
      stringBuilder.append("results:").append(hashMap.get("results").toString()).append("\n");
      stringBuilder.append("duration:").append(hashMap.get("duration").toString()).append("\n");
    }
 else {
      title+="failed";
      stringBuilder.append("response:").append(msg).append("\n");
    }
  }
 catch (  Exception e) {
    final StringWriter out=new StringWriter();
    e.printStackTrace(new PrintWriter(out));
    title+="failed";
    stringBuilder.append(out.toString());
  }
 finally {
    request.releaseConnection();
  }
  logger.info("title:" + title);
  logger.info("content:" + stringBuilder.toString());
  sendMail(receivers,title,stringBuilder.toString());
}
