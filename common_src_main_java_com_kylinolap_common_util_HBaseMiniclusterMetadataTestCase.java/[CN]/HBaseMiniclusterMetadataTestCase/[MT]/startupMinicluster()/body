{
  if (testUtil == null) {
    testUtil=new HBaseTestingUtility();
  }
  try {
    hbaseCluster=testUtil.startMiniCluster();
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  Configuration config=hbaseCluster.getConf();
  String host=config.get(HConstants.ZOOKEEPER_QUORUM);
  String port=config.get(HConstants.ZOOKEEPER_CLIENT_PORT);
  String parent=config.get(HConstants.ZOOKEEPER_ZNODE_PARENT);
  config.set(HConstants.HBASE_CLIENT_PAUSE,"3000");
  config.set(HConstants.HBASE_CLIENT_RETRIES_NUMBER,"5");
  config.set(HConstants.HBASE_CLIENT_OPERATION_TIMEOUT,"60000");
  String hbaseconnectionUrl="hbase:" + host + ":"+ port+ ":"+ parent;
  KylinConfig.getInstanceFromEnv().setMetadataUrl(hbaseconnectionUrl);
  KylinConfig.getInstanceFromEnv().setStorageUrl(hbaseconnectionUrl);
}
