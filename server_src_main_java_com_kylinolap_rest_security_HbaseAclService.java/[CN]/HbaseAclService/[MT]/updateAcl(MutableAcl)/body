{
  Acl oldAcl=readAclById(acl.getObjectIdentity());
  if (null == oldAcl) {
    throw new NotFoundException("ACL of " + acl.getObjectIdentity() + " not found!");
  }
  Serializer<AceInfo> aceSerializer=new Serializer<AceInfo>(AceInfo.class);
  HTableInterface htable=null;
  try {
    htable=HBaseConnection.get(hbaseUrl).getTable(userTableName);
    Delete delete=new Delete(Bytes.toBytes(String.valueOf(acl.getObjectIdentity().getIdentifier())));
    delete.deleteFamily(Bytes.toBytes(ACL_ACES_FAMILY));
    htable.delete(delete);
    Put put=new Put(Bytes.toBytes(String.valueOf(acl.getObjectIdentity().getIdentifier())));
    for (    AccessControlEntry ace : acl.getEntries()) {
      AceInfo aceInfo=new AceInfo(ace);
      put.add(Bytes.toBytes(ACL_INFO_FAMILY),Bytes.toBytes(aceInfo.getSidInfo().getSid()),aceSerializer.serialize(aceInfo));
    }
    htable.put(put);
    htable.flushCommits();
  }
 catch (  IOException e) {
    logger.error(e.getLocalizedMessage(),e);
  }
 finally {
    IOUtils.closeQuietly(htable);
  }
  return (MutableAcl)readAclById(acl.getObjectIdentity());
}
