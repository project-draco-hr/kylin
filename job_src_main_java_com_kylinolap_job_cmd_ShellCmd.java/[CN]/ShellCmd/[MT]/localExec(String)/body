{
  output.setStatus(JobStepStatusEnum.RUNNING);
  String[] cmd=new String[3];
  cmd[0]="/bin/bash";
  cmd[1]="-c";
  cmd[2]=command;
  BufferedReader reader=null;
  int exitCode=-1;
  try {
    ProcessBuilder builder=new ProcessBuilder(cmd);
    builder.redirectErrorStream(true);
    Process proc=builder.start();
    reader=new BufferedReader(new InputStreamReader(proc.getInputStream()));
    String line=null;
    while ((line=reader.readLine()) != null) {
      output.appendOutput(line);
    }
    exitCode=proc.waitFor();
  }
 catch (  Exception e) {
    throw new JobException(e);
  }
 finally {
    if (reader != null) {
      try {
        reader.close();
      }
 catch (      IOException e) {
        throw new JobException(e);
      }
    }
  }
  return exitCode;
}
