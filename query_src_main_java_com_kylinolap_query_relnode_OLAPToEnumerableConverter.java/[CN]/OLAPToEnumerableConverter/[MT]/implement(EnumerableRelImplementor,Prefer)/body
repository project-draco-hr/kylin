{
  OLAPImplementor olapImplementor=new OLAPRel.OLAPImplementor();
  olapImplementor.visitChild(getChild(),this);
  try {
    for (    OLAPContext context : OLAPContext.getThreadLocalContexts()) {
      CubeInstance cube=QueryRouter.findCube(context);
      context.cubeInstance=cube;
      context.cubeDesc=cube.getDescriptor();
    }
  }
 catch (  CubeNotFoundException e) {
    OLAPContext ctx0=(OLAPContext)OLAPContext.getThreadLocalContexts().toArray()[0];
    if (ctx0 != null && ctx0.olapSchema.hasStarSchemaUrl()) {
      return buildHiveResult(enumImplementor,pref,ctx0);
    }
 else {
      throw e;
    }
  }
  RewriteImplementor rewriteImplementor=new RewriteImplementor();
  rewriteImplementor.visitChild(this,getChild());
  EnumerableRel child=(EnumerableRel)getChild();
  JavaImplementor javaImplementor=new JavaImplementor(enumImplementor);
  return javaImplementor.visitChild(this,0,child,pref);
}
