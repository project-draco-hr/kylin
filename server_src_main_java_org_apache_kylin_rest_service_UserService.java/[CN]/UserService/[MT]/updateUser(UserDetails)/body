{
  HTableInterface htable=null;
  try {
    byte[] userAuthorities=serialize(user.getAuthorities());
    htable=aclHBaseStorage.getTable(userTableName);
    Put put=new Put(Bytes.toBytes(user.getUsername()));
    put.add(Bytes.toBytes(AclHBaseStorage.USER_AUTHORITY_FAMILY),Bytes.toBytes(AclHBaseStorage.USER_AUTHORITY_COLUMN),userAuthorities);
    htable.put(put);
    htable.flushCommits();
  }
 catch (  IOException e) {
    throw new RuntimeException(e.getMessage(),e);
  }
 finally {
    IOUtils.closeQuietly(htable);
  }
}
